<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sideline Satirist - Premium Sports Satire</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Grotesk:wght@300;400;500;600;700&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <nav class="navbar">
        <div class="navbar-content">
            <a href="index.html" class="logo">
                <i class="fas fa-football-ball logo-icon"></i>
                <span class="logo-text">The Sideline Satirist</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html" class="nav-link">Latest</a></li>
                <li><a href="categories.html" class="nav-link">Categories</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="#" class="subscribe-btn">Subscribe</a></li>
            </ul>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-particles" id="particles"></div>
        <div class="hero-content">
            <h1 class="hero-title">Where Sports Meet Sarcasm</h1>
            <p class="hero-subtitle">Premium satirical sports coverage that's almost as reliable as instant replay</p>
        </div>
        <div class="scroll-indicator">
            <i class="fas fa-chevron-down"></i>
        </div>
    </header>

    <main>
        <section class="featured-section">
            <div class="featured-grid" id="featuredPost"></div>
        </section>

        <section class="latest-posts">
            <div class="container">
                <h2 class="section-title">Latest Stories</h2>
                <div class="posts-grid" id="postsGrid"></div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>The Sideline Satirist</h3>
                    <p>Making sports funny since whenever we started doing this.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="categories.html">Categories</a></li>
                        <li class="footer-link"><a href="about.html">About Us</a></li>
                        <li class="footer-link"><a href="#">Subscribe</a></li>
                        <li class="footer-link"><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Categories</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="#">Football</a></li>
                        <li class="footer-link"><a href="#">Basketball</a></li>
                        <li class="footer-link"><a href="#">Baseball</a></li>
                        <li class="footer-link"><a href="#">Soccer</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 The Sideline Satirist. All rights probably reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Custom Cursor
        const cursor = document.querySelector('.cursor');
        const cursorFollower = document.querySelector('.cursor-follower');

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            setTimeout(() => {
                cursorFollower.style.left = e.clientX + 'px';
                cursorFollower.style.top = e.clientY + 'px';
            }, 100);
        });

        // Navbar Hide on Scroll
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            const navbar = document.querySelector('.navbar');
            
            if (currentScroll <= 0) {
                navbar.classList.remove('hidden');
                return;
            }
            
            if (currentScroll > lastScroll && !navbar.classList.contains('hidden')) {
                navbar.classList.add('hidden');
            } else if (currentScroll < lastScroll && navbar.classList.contains('hidden')) {
                navbar.classList.remove('hidden');
            }
            
            lastScroll = currentScroll;
        });

        // Particle Effect
        function createParticles() {
            const particles = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particles.appendChild(particle);
            }
        }
        createParticles();

        // Intersection Observer for Animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.1
        });

        document.querySelectorAll('.fade-in, .post-card, .section-title, .featured-image, .featured-content').forEach((el) => {
            observer.observe(el);
        });

        // Create featured post HTML
        function createFeaturedPost(post) {
            return `
                <div class="featured-image fade-in">
                    <img src="${post.image}" alt="${post.title}" loading="lazy">
                </div>
                <div class="featured-content fade-in">
                    <span class="category-badge">${post.category}</span>
                    <h2 class="featured-title">${post.title}</h2>
                    <div class="meta-info">
                        <span class="meta-item">
                            <i class="far fa-calendar"></i>
                            ${formatDate(post.date)}
                        </span>
                        <span class="meta-item">
                            <i class="far fa-user"></i>
                            ${post.author}
                        </span>
                    </div>
                    <p>${post.excerpt}</p>
                    <a href="${post.path}" class="read-more">Read Full Story →</a>
                </div>
            `;
        }

        // Create post card HTML
        function createPostCard(post, index) {
            return `
                <article class="post-card fade-in" style="transition-delay: ${index * 0.1}s">
                    <img src="${post.image}" alt="${post.title}" class="post-image" loading="lazy">
                    <div class="post-content">
                        <span class="category-badge">${post.category}</span>
                        <h3 class="post-title">${post.title}</h3>
                        <div class="meta-info">
                            <span class="meta-item">
                                <i class="far fa-calendar"></i>
                                ${formatDate(post.date)}
                            </span>
                        </div>
                        <p>${post.excerpt}</p>
                        <a href="${post.path}" class="read-more">Read More →</a>
                    </div>
                </article>
            `;
        }

        // Format date
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // Initialize blog with loading states
        async function initializeBlog() {
            const featuredPost = document.getElementById('featuredPost');
            const postsGrid = document.getElementById('postsGrid');

            // Show loading state
            featuredPost.innerHTML = `
                <div class="skeleton" style="height: 500px"></div>
            `;
            postsGrid.innerHTML = Array(6).fill(`
                <div class="post-card skeleton">
                    <div style="height: 250px"></div>
                    <div class="post-content">
                        <div class="skeleton" style="height: 24px; width: 100px; margin-bottom: 16px"></div>
                        <div class="skeleton" style="height: 32px; margin-bottom: 16px"></div>
                        <div class="skeleton" style="height: 20px; width: 150px"></div>
                    </div>
                </div>
            `).join('');

            try {
                const posts = await getPosts('lawrence18365', 'sportsblog', 'posts');
                
                // Featured post
                const featuredPost = posts.find(post => post.featured);
                if (featuredPost) {
                    document.getElementById('featuredPost').innerHTML = createFeaturedPost(featuredPost);
                }

                // Regular posts
                const regularPosts = posts
                    .filter(post => !post.featured)
                    .sort((a, b) => new Date(b.date) - new Date(a.date));

                postsGrid.innerHTML = regularPosts.map(createPostCard).join('');
            } catch (error) {
                console.error('Error initializing blog:', error);
                featuredPost.innerHTML = '<p>Error loading featured post.</p>';
                postsGrid.innerHTML = '<p>Error loading posts.</p>';
            }
        }

        // Fetch posts from GitHub
        async function getPosts(repoOwner, repoName, postsDir) {
            const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${postsDir}`;
            
            const response = await fetch(apiUrl);
            const data = await response.json();

            const postsWithMetadata = await Promise.all(data.map(async (post) => {
                if (!post.name.endsWith('.html')) return null;

                const postUrl = post.download_url;
                const postResponse = await fetch(postUrl);
                const postContent = await postResponse.text();

                const frontMatterMatch = postContent.match(/^---([\s\S]*?)---/);
                const frontMatter = frontMatterMatch ? jsyaml.load(frontMatterMatch[1]) : {};

                const commitUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/commits?path=${postsDir}/${post.name}`;
                const commitResponse = await fetch(commitUrl);
                const commitData = await commitResponse.json();
                const commitDate = commitData[0]?.commit?.committer?.date || '';

                return { 
                    ...post, 
                    ...frontMatter, 
                    commitDate,
                    path: `${postsDir}/${post.name}`
                };
            }));

            return postsWithMetadata.filter(post => post !== null);
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeBlog);
    </script>
</body>
</html>

